"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([["46"],{73227:function(e,i,t){t.d(i,{i:()=>d});var r=t(2926),n=t(87017),l=t(50576),s=t(40371),a=t(63706);let d=()=>({downloadAdvisory:(e,i)=>{(0,s.Em)({client:l.L,path:{key:e},responseType:"arraybuffer",headers:{Accept:"text/plain",responseType:"blob"}}).then(t=>{(0,r.saveAs)(new Blob([t.data]),i||`${e}.json`)})},downloadSBOM:(e,i)=>{(0,s.XW)({client:l.L,path:{key:e},responseType:"arraybuffer",headers:{Accept:"text/plain",responseType:"blob"}}).then(t=>{(0,r.saveAs)(new Blob([t.data]),i||`${e}.json`)})},downloadSBOMLicenses:e=>{(0,n.Co)(e).then(i=>{let t=null,n=i.headers?.["content-disposition"]?.toString();n&&(t=(0,a.lj)(n)),(0,r.saveAs)(new Blob([i.data]),t||`${e}.tar.gz`)})}})},92934:function(e,i,t){t.d(i,{F:()=>u,P:()=>c});var r=t(24246),n=t(27378),l=t(74502),s=t(72603),a=t(47169),d=t(22048),o=t(17598);let c=n.createContext({}),u=e=>{let{children:i}=e,t=(0,a.vZ)({tableName:"advisory",persistenceKeyPrefix:l.yq.advisories,persistTo:"urlParams",columnNames:{identifier:"ID",title:"Title",severity:"Aggregated Severity",type:"Type",modified:"Revision",vulnerabilities:"Vulnerabilities"},isPaginationEnabled:!0,isSortEnabled:!0,sortableColumns:["identifier","severity","modified"],initialSort:{columnKey:"modified",direction:"desc"},isFilterEnabled:!0,filterCategories:[{categoryKey:l.L4,title:"Filter text",placeholderText:"Search",type:s.vA.search},{categoryKey:"average_severity",title:"Severity",placeholderText:"Severity",type:s.vA.multiselect,selectOptions:[{value:"null",label:"Unknown"},{value:"none",label:"None"},{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"critical",label:"Critical"}]},{categoryKey:"modified",title:"Revision",type:s.vA.dateRange}],isExpansionEnabled:!1}),{result:{data:n,total:u},isFetching:y,fetchError:h}=(0,o.N7)((0,a.QO)({...t,hubSortFieldKeys:{identifier:"identifier",severity:"average_score",modified:"modified"}})),p=(0,a.KC)({...t,idProperty:"identifier",currentPageItems:n,totalItemCount:u,isLoading:y,selectionState:(0,d.U)({items:n,isEqual:(e,i)=>e.identifier===i.identifier})});return(0,r.jsx)(c.Provider,{value:{totalItemCount:u,isFetching:y,fetchError:h,tableControls:p},children:i})}},26179:function(e,i,t){t.d(i,{H:()=>g});var r=t(24246),n=t(27378),l=t(65783),s=t(4835),a=t(14350),d=t(11165),o=t(89330),c=t(31423),u=t(94154),y=t(88935),h=t(3804),p=t(31336),v=t(73227),m=t(57524),x=t(49304),f=t(63706),b=t(7615),j=t(92934);let g=()=>{let{isFetching:e,fetchError:i,totalItemCount:t,tableControls:g}=n.useContext(j.P),{numRenderedColumns:T,currentPageItems:w,propHelpers:{paginationProps:K,tableProps:C,getThProps:P,getTrProps:S,getTdProps:E},expansionDerivedState:{isCellExpanded:k}}=g,{downloadAdvisory:A}=(0,v.i)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.i,{...C,"aria-label":"advisory-table",children:[(0,r.jsx)(a.h,{children:(0,r.jsx)(d.Tr,{children:(0,r.jsxs)(p.qK,{...g,children:[(0,r.jsx)(o.Th,{...P({columnKey:"identifier"})}),(0,r.jsx)(o.Th,{...P({columnKey:"title"})}),(0,r.jsx)(o.Th,{...P({columnKey:"severity"})}),(0,r.jsx)(o.Th,{...P({columnKey:"type"})}),(0,r.jsx)(o.Th,{...P({columnKey:"modified"})}),(0,r.jsx)(o.Th,{...P({columnKey:"vulnerabilities"})})]})})}),(0,r.jsx)(p.hp,{isLoading:e,isError:!!i,isNoData:0===t,numRenderedColumns:T,children:w.map((e,i)=>{let t=e.vulnerabilities.reduce((e,i)=>{let t=(0,b.g)(i.severity);return Object.assign(e,{[t]:e[t]+1})},{critical:0,high:0,medium:0,low:0,none:0,unknown:0});return(0,r.jsx)(c.p,{isExpanded:k(e),children:(0,r.jsx)(d.Tr,{...S({item:e}),children:(0,r.jsxs)(p.Cx,{...g,item:e,rowIndex:i,children:[(0,r.jsx)(u.Td,{width:15,modifier:"breakWord",...E({columnKey:"identifier",isCompoundExpandToggle:!0,item:e,rowIndex:i}),children:(0,r.jsx)(l.OL,{to:`/advisories/${e.uuid}`,children:e.document_id})}),(0,r.jsx)(u.Td,{width:30,modifier:"truncate",...E({columnKey:"title"}),children:e.title}),(0,r.jsx)(u.Td,{width:15,modifier:"truncate",...E({columnKey:"severity"}),children:e.average_severity&&(0,r.jsx)(m.o,{value:(0,b.g)(e.average_severity),score:e.average_score,showLabel:!0,showScore:!0})}),(0,r.jsx)(u.Td,{width:10,...E({columnKey:"type"}),children:e.labels.type}),(0,r.jsx)(u.Td,{width:10,modifier:"truncate",...E({columnKey:"modified"}),children:(0,f.p6)(e.modified)}),(0,r.jsx)(u.Td,{width:20,...E({columnKey:"vulnerabilities"}),children:(0,r.jsx)(x.u,{severities:t})}),(0,r.jsx)(u.Td,{isActionCell:!0,children:(0,r.jsx)(y.k,{items:[{title:"Download",onClick:()=>{A(e.uuid,`${e.identifier}.json`)}}]})})]})})},e.identifier)})})]}),(0,r.jsx)(h.p,{idPrefix:"advisory-table",isTop:!1,paginationProps:K})]})}},80475:function(e,i,t){t.d(i,{P:()=>u});var r=t(24246),n=t(27378),l=t(70715),s=t(40982),a=t(89226),d=t(72603),o=t(3804),c=t(92934);let u=e=>{let{showFilters:i}=e,{tableControls:t}=n.useContext(c.P),{propHelpers:{toolbarProps:u,filterToolbarProps:y,paginationToolbarItemProps:h,paginationProps:p}}=t;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.o,{...u,children:(0,r.jsxs)(s.c,{children:[i&&(0,r.jsx)(d.Ki,{...y}),(0,r.jsx)(a.E,{...h,children:(0,r.jsx)(o.p,{idPrefix:"advisory-table",isTop:!0,paginationProps:p})})]})})})}},17598:function(e,i,t){t.d(i,{N7:()=>u,gw:()=>y,tG:()=>h});var r=t(1183),n=t(68e3),l=t(50576),s=t(40371),a=t(87017),d=t(47169),o=t(95169);let c="advisories",u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{data:t,isLoading:n,error:a,refetch:o}=(0,r.a)({queryKey:[c,e],queryFn:()=>(0,s.A1)({client:l.L,query:{...(0,d.rm)(e)}}),enabled:!i});return{result:{data:t?.data?.items||[],total:t?.data?.total??0,params:e??e},isFetching:n,fetchError:a||null,refetch:o}},y=e=>{let{data:i,isLoading:t,error:n}=(0,r.a)({queryKey:[c,e],queryFn:()=>(0,s.pB)({client:l.L,path:{key:e}}),enabled:void 0!==e});return{advisory:i?.data,isFetching:t,fetchError:n}},h=()=>{let e=(0,n.NL)();return(0,o.V)({parallel:!0,uploadFn:(e,i)=>(0,a.Cu)(e,i),onSuccess:()=>{e.invalidateQueries({queryKey:[c]})}})}}}]);